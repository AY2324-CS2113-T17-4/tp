


<!DOCTYPE html>
<html id="htmlId">
<head>
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8"> 
  <title>Coverage Report > ModulePlannerController</title>
  <style type="text/css">
    @import "../../css/coverage.css";
    @import "../../css/idea.min.css";
  </style>
  <script type="text/javascript" src="../../js/highlight.min.js"></script>
  <script type="text/javascript" src="../../js/highlightjs-line-numbers.min.js"></script>
</head>

<body>
<div class="content">
<div class="breadCrumbs">
Current scope:     <a href="../../index.html">all classes</a>
    <span class="separator">|</span>
    <a href="../index.html">seedu.duke.controllers</a>
</div>

<h1>Coverage Summary for Class: ModulePlannerController (seedu.duke.controllers)</h1>

<table class="coverageStats">
<tr>
  <th class="name">Class</th>
<th class="coverageStat 
">
  Class, %
</th>
<th class="coverageStat 
">
  Method, %
</th>
<th class="coverageStat 
">
  Branch, %
</th>
<th class="coverageStat 
">
  Line, %
</th>
</tr>
<tr>
  <td class="name">ModulePlannerController</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (1/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    83.3%
  </span>
  <span class="absValue">
    (5/6)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    14.8%
  </span>
  <span class="absValue">
    (8/54)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    44.4%
  </span>
  <span class="absValue">
    (36/81)
  </span>
</td>
</tr>

</table>

<br/>
<br/>


<pre>
<code class="sourceCode" id="sourceCode">&nbsp;package seedu.duke.controllers;
&nbsp;import seedu.duke.models.logic.CompletePreqs;
&nbsp;import seedu.duke.models.logic.ModuleList;
&nbsp;import seedu.duke.models.schema.Major;
&nbsp;import seedu.duke.models.schema.Student;
&nbsp;import seedu.duke.models.logic.Api;
&nbsp;import seedu.duke.views.CommandLineView;
&nbsp;import seedu.duke.utils.Parser;
&nbsp;import java.io.InvalidObjectException;
&nbsp;import java.util.*;
&nbsp;
&nbsp;public class ModulePlannerController {
&nbsp;    private CommandLineView view;
&nbsp;    private Parser parser;
&nbsp;    private Student student;
&nbsp;    private ModuleList modulesMajor;
&nbsp;    private ModuleList modulesTaken;
&nbsp;    private ModuleList modulesLeft;
&nbsp;    private HashMap&lt;String, List&lt;String&gt;&gt; modsWithPreqs;
&nbsp;    private CompletePreqs addModulePreqs;
&nbsp;
<b class="fc">&nbsp;    public ModulePlannerController() {</b>
<b class="fc">&nbsp;        this.view = new CommandLineView();</b>
<b class="fc">&nbsp;        this.parser = new Parser();</b>
<b class="fc">&nbsp;        this.student = new Student();</b>
&nbsp;
&nbsp;        //This modules list of taken and classes left can be in a storage class later on.
<b class="fc">&nbsp;        this.modulesMajor = new ModuleList(&quot;CS1231S CS2030S CS2040S CS2100 CS2101 CS2106 CS2109S CS3230&quot;);</b>
<b class="fc">&nbsp;        this.modulesTaken = new ModuleList(&quot;CS1231S MA1511&quot;);</b>
<b class="fc">&nbsp;        this.modulesLeft = new ModuleList();</b>
&nbsp;
<b class="fc">&nbsp;        modsWithPreqs = new HashMap&lt;&gt;();</b>
&nbsp;
&nbsp;        //Pass in Hashmap of mods with Preqs
<b class="fc">&nbsp;        this.addModulePreqs = new CompletePreqs(addModsWithPreqs(modsWithPreqs));</b>
&nbsp;        //Pass in the list of mods completed.
<b class="fc">&nbsp;        addModulePreqs.initializeCompletedMods(modulesTaken);</b>
&nbsp;
&nbsp;
&nbsp;    }
&nbsp;
&nbsp;
&nbsp;
&nbsp;    public void start() {
<b class="nc">&nbsp;        view.displayWelcome();</b>
<b class="nc">&nbsp;        Scanner in = new Scanner(System.in);</b>
<b class="nc">&nbsp;        String userInput = in.nextLine();</b>
&nbsp;
<b class="nc">&nbsp;        while (!userInput.equals(&quot;bye&quot;)) {</b>
&nbsp;
<b class="nc">&nbsp;            String[] words = userInput.split(&quot; &quot;);</b>
&nbsp;
<b class="nc">&nbsp;            String initialWord = words[0].toLowerCase();</b>
&nbsp;
<b class="nc">&nbsp;            switch (initialWord) {</b>
&nbsp;            case &quot;hi&quot;: {
<b class="nc">&nbsp;                view.displayMessage(&quot;can put the commands here&quot;);</b>
<b class="nc">&nbsp;                break;</b>
&nbsp;            }
&nbsp;            case &quot;hello&quot;: {
<b class="nc">&nbsp;                view.displayMessage(&quot;yup&quot;);</b>
<b class="nc">&nbsp;                break;</b>
&nbsp;            }
&nbsp;            case &quot;info&quot;: {
<b class="nc">&nbsp;                view.displayMessage(&quot;info&quot;);</b>
<b class="nc">&nbsp;                view.displayMessage((String) Objects.requireNonNull(Api.getModuleInfoJson(&quot;CS2113&quot;)).get(&quot;description&quot;));</b>
<b class="nc">&nbsp;                break;</b>
&nbsp;            }
&nbsp;            case &quot;left&quot;: {
<b class="nc">&nbsp;                ArrayList&lt;String&gt; modules = listModulesLeft();</b>
&nbsp;
<b class="nc">&nbsp;                view.displayMessage(&quot;Modules left:&quot;);</b>
<b class="nc">&nbsp;                for (String module : modules) {</b>
<b class="nc">&nbsp;                    view.displayMessage(module);</b>
<b class="nc">&nbsp;                }</b>
<b class="nc">&nbsp;                break;</b>
&nbsp;            }
&nbsp;            case &quot;pace&quot;: {
&nbsp;                //assumed that everyone graduates at y4s2
&nbsp;                //waiting for retrieving logic
<b class="nc">&nbsp;                int modulesCreditsCompleted = 100;</b>
<b class="nc">&nbsp;                int totalCreditsToGraduate = 160;</b>
<b class="nc">&nbsp;                int creditsLeft = totalCreditsToGraduate - modulesCreditsCompleted;</b>
<b class="nc">&nbsp;                computePace(words, creditsLeft);</b>
<b class="nc">&nbsp;                break;</b>
&nbsp;            }
&nbsp;            case &quot;major&quot;: {
<b class="nc">&nbsp;                String printMessageCommand = student.updateMajor(userInput);</b>
<b class="nc">&nbsp;                switch (printMessageCommand) {</b>
&nbsp;                case &quot;currentMajor&quot;:
<b class="nc">&nbsp;                    view.displayMessage(&quot;Current major is &quot; + student.getMajor() + &quot;.&quot;);</b>
<b class="nc">&nbsp;                    break;</b>
&nbsp;                case &quot;newMajor&quot;:
<b class="nc">&nbsp;                    view.displayMessage(&quot;Major &quot; + student.getMajor() + &quot; selected!&quot;);</b>
<b class="nc">&nbsp;                    break;</b>
&nbsp;                case &quot;invalidMajor&quot;:
<b class="nc">&nbsp;                    view.displayMessage(&quot;Please select a major from this list: &quot; + Arrays.toString(Major.values()));</b>
<b class="nc">&nbsp;                    break;</b>
&nbsp;                // Empty default branch as printMessageCommand cannot take any other value
&nbsp;                default:
&nbsp;                    break;
&nbsp;                }
<b class="nc">&nbsp;                break;</b>
&nbsp;            }
&nbsp;            case &quot;complete&quot;: {
<b class="nc">&nbsp;                if (addModulePreqs.checkModInput(words, modulesMajor)) {</b>
<b class="nc">&nbsp;                    String moduleCompleted = words[1];</b>
<b class="nc">&nbsp;                    addModulePreqs.getUnlockedMods(moduleCompleted);</b>
<b class="nc">&nbsp;                    addModulePreqs.printUnlockedMods(moduleCompleted);</b>
<b class="nc">&nbsp;                    break;</b>
&nbsp;                }
&nbsp;                break;
&nbsp;            }
&nbsp;            default: {
<b class="nc">&nbsp;                view.displayMessage(&quot;Hello &quot; + userInput);</b>
&nbsp;                break;
&nbsp;            }
&nbsp;
&nbsp;            }
<b class="nc">&nbsp;            userInput = in.nextLine();</b>
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
&nbsp;
&nbsp;
&nbsp;    /**
&nbsp;     * Computes and returns the list of modules that are left in the ModuleList modulesMajor
&nbsp;     * after subtracting the modules in the ModuleList modulesTaken.
&nbsp;     *
&nbsp;     * @author janelleenqi
&nbsp;     * @return An ArrayList of module codes representing the modules left after the subtraction.
&nbsp;     * @throws InvalidObjectException If either modulesMajor or modulesTaken is null.
&nbsp;     */
&nbsp;    public ArrayList&lt;String&gt; listModulesLeft() {
&nbsp;        //modulesMajor.txt - modulesTaken.txt
&nbsp;        try {
<b class="fc">&nbsp;            modulesLeft.getDifference(modulesMajor, modulesTaken);</b>
<b class="fc">&nbsp;            return modulesLeft.getMainModuleList();</b>
<b class="nc">&nbsp;        } catch (InvalidObjectException e) {</b>
<b class="nc">&nbsp;            System.out.println(&quot;Error: &quot; + e.getMessage());</b>
&nbsp;        }
<b class="nc">&nbsp;        return null;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Computes the recommended pace for completing a degree based on the provided academic year
&nbsp;     * and credits left until graduation.
&nbsp;     *
&nbsp;     * @param userInput  An array of user input where userInput[0] is the command and userInput[1] is the academic year.
&nbsp;     * @param creditsLeft The number of credits left until graduation.
&nbsp;     * @throws IllegalArgumentException if the provided academic year is invalid.
&nbsp;     */
&nbsp;    public void computePace(String[] userInput, int creditsLeft) {
<b class="fc">&nbsp;        boolean argumentProvided = userInput.length != 1;</b>
&nbsp;        //wait for text file logic
<b class="fc">&nbsp;        if (!argumentProvided) {</b>
<b class="fc">&nbsp;            view.displayMessage(&quot;You currently have &quot; + creditsLeft + &quot; MCs till graduation&quot;);</b>
&nbsp;            return;
&nbsp;        }
<b class="fc">&nbsp;        if (!parser.isValidAcademicYear(userInput[1])) {</b>
&nbsp;            return;
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        String[] parts = userInput[1].split(&quot;/&quot;);</b>
<b class="fc">&nbsp;        String year = parts[0].toUpperCase();</b>
<b class="fc">&nbsp;        String semester = parts[1].toUpperCase();</b>
&nbsp;
<b class="fc">&nbsp;        int lastSemesterOfYear = 2;</b>
<b class="fc">&nbsp;        int lastYearOfDegree = 4;</b>
&nbsp;
&nbsp;
<b class="fc">&nbsp;        int yearIntValue = Character.getNumericValue(year.charAt(1));</b>
<b class="fc">&nbsp;        int semesterIntValue = Character.getNumericValue(semester.charAt(1));</b>
&nbsp;        //if we are at y2s1, we have 5 semesters left
<b class="fc">&nbsp;        int semestersLeft = (lastYearOfDegree - yearIntValue) * 2 + (lastSemesterOfYear - semesterIntValue);</b>
<b class="fc">&nbsp;        int creditsPerSem = Math.round((float) creditsLeft / semestersLeft);</b>
<b class="fc">&nbsp;        view.displayMessage(&quot;You have &quot; + creditsLeft + &quot;MCs for &quot; + semestersLeft + &quot; semesters. &quot;</b>
&nbsp;                + &quot;Recommended Pace: &quot;+ creditsPerSem + &quot;MCs per sem until graduation&quot;);
&nbsp;    }
&nbsp;
&nbsp;
&nbsp;    /**
&nbsp;     * Add all mods that require prerequisites to a map storing the mod and a set of preqs
&nbsp;     * @param list
&nbsp;     * @return HashMap of Mods with their corresponding preqs
&nbsp;     */
&nbsp;
&nbsp;    private HashMap&lt;String, List&lt;String&gt;&gt; addModsWithPreqs(HashMap&lt;String, List&lt;String&gt;&gt; list) {
&nbsp;        //Only two mods don&#39;t have preqs MA1511 and CS1231S.
&nbsp;        // In the future this will be dealt
<b class="fc">&nbsp;        addValue(list, &quot;CS3230&quot;, &quot;CS2030S&quot;);</b>
<b class="fc">&nbsp;        addValue(list, &quot;CS3230&quot;, &quot;CS1231S&quot;);</b>
&nbsp;
<b class="fc">&nbsp;        addValue(list, &quot;CS2030S&quot;, &quot;CS1231S&quot;);</b>
&nbsp;
<b class="fc">&nbsp;        addValue(list, &quot;CS2040S&quot;, &quot;CS1231S&quot;);</b>
&nbsp;
<b class="fc">&nbsp;        addValue(list, &quot;CS2106&quot;, &quot;CS1231S&quot;);</b>
&nbsp;
<b class="fc">&nbsp;        addValue(list, &quot;CS2109S&quot;, &quot;CS1231S&quot;);</b>
&nbsp;
<b class="fc">&nbsp;        return list;</b>
&nbsp;    }
&nbsp;
&nbsp;
&nbsp;    /**
&nbsp;     * Helper function to addModsWithPreqs to add Strings and sets together
&nbsp;     * @param map
&nbsp;     * @param key
&nbsp;     * @param value
&nbsp;     */
&nbsp;    public static void addValue(HashMap&lt;String, List&lt;String&gt;&gt; map, String key, String value) {
&nbsp;        // If the map does not contain the key, put an empty list for that key
<b class="fc">&nbsp;        if (!map.containsKey(key)) {</b>
<b class="fc">&nbsp;            map.put(key, new ArrayList&lt;&gt;());</b>
&nbsp;        }
&nbsp;        // Add the value to the list associated with the key
<b class="fc">&nbsp;        map.get(key).add(value);</b>
&nbsp;    }
&nbsp;
&nbsp;}
</code>
</pre>
</div>

<script type="text/javascript">
(function() {
    var msie = false, msie9 = false;
    /*@cc_on
      msie = true;
      @if (@_jscript_version >= 9)
        msie9 = true;
      @end
    @*/

    if (!msie || msie && msie9) {
      hljs.highlightAll()
      hljs.initLineNumbersOnLoad();
    }
})();
</script>

<div class="footer">
    
    <div style="float:right;">generated on 2023-10-26 17:32</div>
</div>
</body>
</html>
